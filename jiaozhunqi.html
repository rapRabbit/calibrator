<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .target {
            width: auto;
            height: 100%;
        }
        .right {
            float: right;
        }
        .middle {
            margin-top: 100px;
            margin-right: 100px;
        }
        #sum {

        }
        .bullet {
            display: none;
            position: absolute;
            width: 100px;
            height: 100px;
        }
    </style>
</head>
<body>
    <div class="box" id="box" style="height: 360px;">
        <img class="target" src="./target.jpg" alt="">
        <img src="./bullet.png" class="bullet" id="bullet1">
        <img src="./bullet.png" class="bullet" id="bullet2">
        <img src="./bullet.png" class="bullet" id="bullet3">
        <img src="./bullet.png" class="bullet" id="bullet4">
        <div class="right" id="right">
            <div class="middle">
               第一发弹 x轴：<input type="text" id="a1">
               y轴：<input type="text" id="b1">
            </div>
            <div class="m">
            第二发弹 x轴：<input type="text" id="a2">
                y轴：<input type="text" id="b2">
            </div>
            <div class="m">
                第三发弹 x轴：<input type="text" id="a3">
                y轴：<input type="text" id="b3">
            </div>
            <div class="m">
                第四发弹 x轴：<input type="text" id="a4">
                y轴：<input type="text" id="b4">
            </div>
            <div>
                平均弹着点： <text id="average"></text>
            </div>
            
        </div>
    </div>
</body>
</html>
<script>
    var a
    var b
    var pre_len
    let height = window.innerHeight;
    document.getElementById('box').style.height = height + 'px';
    document.getElementById('right').style.height = height + 'px';
    var inputA1 = document.getElementById('a1')
    var inputA2 = document.getElementById('a2')
    var inputA3 = document.getElementById('a3')
    var inputA4 = document.getElementById('a4')
    var inputB1 = document.getElementById('b1')
    var inputB2 = document.getElementById('b2')
    var inputB3 = document.getElementById('b3')
    var inputB4 = document.getElementById('b4')
    
    inputB1.oninput = function() {
        var a1 = Number(inputA1.value)
        var a1 = a1 < 0? 5 - Math.abs(a1) : 5 + a1
        var b1 = Number(inputB1.value)
        var b1 = b1 < 0? Math.abs(b1) + 5 : 5 - b1
        document.getElementById('bullet1').style.display = 'block';
        document.getElementById('bullet1').style.top = b1/10 *  height - 5 + 'px'
        document.getElementById('bullet1').style.left = a1/10 * height - 47 + 'px'
        console.log(height)
        console.log(a1, b1)
        
    }
    inputB2.oninput = function() {
        var a1 = Number(inputA1.value)
        var a2 = Number(inputA2.value)
        var b1 = Number(inputB1.value)
        var b2 = Number(inputB2.value)
        a = (1/2) * (a2 - a1) + a1
        b = (1/2) * (b2 - b1) + b1
        pre_len = Math.sqrt(((a - a2) ** 2) + ((b - b2) ** 2))
        console.log(a, b)
        var a2 = a2 < 0? 5 - Math.abs(a2) : 5 + a2
        var b2 = b2 < 0? Math.abs(b2) + 5 : 5 - b2
        document.getElementById('bullet2').style.display = 'block';
        document.getElementById('bullet2').style.top = b2/10 * height - 5 + 'px'
        document.getElementById('bullet2').style.left = a2/10 * height - 47 + 'px'
    }

    inputB3.oninput = function() {
        var a2 = Number(inputA2.value)
        var b2 = Number(inputB2.value)
        var a3 = Number(inputA3.value)
        var b3 = Number(inputB3.value)
        cur_len = Math.sqrt(((a3 - a) ** 2) + ((b3 - b) ** 2))
        if( pre_len * 2 + 0.000001 >= cur_len){
            a = (1/3) * (a3 - a) + a
            b = (1/3) * (b3 - b) + b
            console.log(a, b)
        } else {
           console.log('第三发是意外弹')
        }
        var a3 = a3 < 0? 5 - Math.abs(a3) : 5 + a3
        var b3 = b3 < 0? Math.abs(b3) + 5 : 5 - b3
        document.getElementById('bullet3').style.display = 'block';
        document.getElementById('bullet3').style.top = b3/10 * height - 5 + 'px'
        document.getElementById('bullet3').style.left = a3/10 * height - 47 + 'px'
    }

    inputB4.oninput = function() {
        var a3 = Number(inputA3.value)
        var b3 = Number(inputB2.value)
        var a4 = Number(inputA4.value)
        var b4 = Number(inputB4.value)
        cur_len = Math.sqrt(((a4 - a) ** 2) + ((b4 - b) ** 2))
        if( pre_len * 2 + 0.000001 >= cur_len){
            a = (1/3) * (a4 - a) + a
            b = (1/3) * (b4 - b) + b
            var average = document.getElementById('average')
            average.innerText = "(" + a + "," + b + ")"
            console.log(average)
        } else {
            console.log('第四发是意外弹')
            console.log(a, b)
            var average = document.getElementById('average')
            average.innerText = "( " + a + ", " + b + " )"
        }
        var a4 = a4 < 0? 5 - Math.abs(a4) : 5 + a4
        var b4 = b4 < 0? Math.abs(b4) + 5 : 5 - b4
        document.getElementById('bullet4').style.display = 'block';
        document.getElementById('bullet4').style.top = b4/10 * height - 5 + 'px'
        document.getElementById('bullet4').style.left = a4/10 * height - 47 + 'px'
    }
     

</script>