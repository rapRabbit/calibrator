<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .target {
            width: auto;
            height: 100%;
        }
        .right {
            float: right;
        }
        .middle {
            margin-top: 100px;
            margin-right: 100px;
        }
        #sum {

        }
        .bullet {
            display: none;
            position: absolute;
            width: 78px;
            height: 78px;
        }

        .reddot {
            display: none;
            position: absolute;
            top: 100px;
            left: 100px;
            width: 10px;
            height: 10px;
            background-color: red;
            border-radius: 50%;
        }
        #third, #four{
            display: none;
        }
    </style>
</head>
<body>
    <div class="box" id="box" style="height: 360px;">
        <img class="target" src="./target.jpg" alt="">
        <img src="./bullet.png" class="bullet" id="bullet1">
        <img src="./bullet.png" class="bullet" id="bullet2">
        <img src="./bullet.png" class="bullet" id="bullet3">
        <img src="./bullet.png" class="bullet" id="bullet4">
        <div class="reddot" id="reddot"></div>
        <div class="right" id="right">
            <div class="middle">
               第一发弹 x轴：<input type="text" id="a1">
               y轴：<input type="text" id="b1">
            </div>
            <div class="m">
            第二发弹 x轴：<input type="text" id="a2">
                y轴：<input type="text" id="b2">
            </div>
            <div class="m">
                第三发弹 x轴：<input type="text" id="a3">
                y轴：<input type="text" id="b3">
            </div>
            <div class="m">
                第四发弹 x轴：<input type="text" id="a4">
                y轴：<input type="text" id="b4">
            </div>
            <br>
            <div id="text">
                <text id="third">第三发是意外弹</text>
                <text id="four">第四发是意外弹</text><br>
                平均弹着点： <text id="average"></text>
            </div>
            
        </div>
    </div>
</body>
</html>
<script>
    var a
    var b
    var pre_len
    let height = window.innerHeight;
    document.getElementById('box').style.height = height + 'px';
    document.getElementById('right').style.height = height + 'px';
    var inputA1 = document.getElementById('a1')
    var inputA2 = document.getElementById('a2')
    var inputA3 = document.getElementById('a3')
    var inputA4 = document.getElementById('a4')
    var inputB1 = document.getElementById('b1')
    var inputB2 = document.getElementById('b2')
    var inputB3 = document.getElementById('b3')
    var inputB4 = document.getElementById('b4')
    
    inputB1.oninput = function() {
        var a1 = Number(inputA1.value)
        var a1 = a1 < 0? 25 - Math.abs(a1) : 25 + a1
        var b1 = Number(inputB1.value)
        var b1 = b1 < 0? Math.abs(b1) + 25 : 25 - b1
        document.getElementById('bullet1').style.display = 'block';
        document.getElementById('bullet1').style.top = height/50 * b1 + 47 + 'px'
        document.getElementById('bullet1').style.left = height/50 * a1 - 37 + 'px'
        console.log(height)
        console.log(a1, b1)
        
    }
    inputB2.oninput = function() {
        var a1 = Number(inputA1.value)
        var a2 = Number(inputA2.value)
        var b1 = Number(inputB1.value)
        var b2 = Number(inputB2.value)
        a = (1/2) * (a2 - a1) + a1
        b = (1/2) * (b2 - b1) + b1
        pre_len = Math.sqrt(((a - a2) ** 2) + ((b - b2) ** 2))
        console.log(a, b)
        var a2 = a2 < 0? 25 - Math.abs(a2) : 25 + a2
        var b2 = b2 < 0? Math.abs(b2) + 25 : 25 - b2
        document.getElementById('bullet2').style.display = 'block';
        document.getElementById('bullet2').style.top = height/50 * b2 + 47 + 'px'
        document.getElementById('bullet2').style.left = height/50 * a2 - 37 + 'px'
    }

    inputB3.oninput = function() {
        var a2 = Number(inputA2.value)
        var b2 = Number(inputB2.value)
        var a3 = Number(inputA3.value)
        var b3 = Number(inputB3.value)
        cur_len = Math.sqrt(((a3 - a) ** 2) + ((b3 - b) ** 2))
        if( pre_len * 2 + 0.000001 >= cur_len){
            a = (1/3) * (a3 - a) + a
            b = (1/3) * (b3 - b) + b
            console.log(a, b)
            document.getElementById('third').style.display = 'none'
        } else {
            document.getElementById('third').style.display = 'block'
           console.log('第三发是意外弹')
        }
        var a3 = a3 < 0? 25 - Math.abs(a3) : 25 + a3
        var b3 = b3 < 0? Math.abs(b3) + 25 : 25 - b3
        document.getElementById('bullet3').style.display = 'block';
        document.getElementById('bullet3').style.top = height/50 * b3 + 47 + 'px'
        document.getElementById('bullet3').style.left = height/50 * a3 - 37 + 'px'
    }

    inputB4.oninput = function() {
        var a3 = Number(inputA3.value)
        var b3 = Number(inputB2.value)
        var a4 = Number(inputA4.value)
        var b4 = Number(inputB4.value)
        cur_len = Math.sqrt(((a4 - a) ** 2) + ((b4 - b) ** 2))
        if( pre_len * 2 + 0.000001 >= cur_len){
            a = (1/3) * (a4 - a) + a
            b = (1/3) * (b4 - b) + b
            document.getElementById('four').style.display = 'none'
            var average = document.getElementById('average')
            average.innerText = '(' + a + ', ' + b + ')'
        } else {
            console.log('第四发是意外弹')
            document.getElementById('four').style.display = 'block'
            var average = document.getElementById('average')
            average.innerText = '(' + a + ', ' + b + ')'
        }
        var a4 = a4 < 0? 25 - Math.abs(a4) : 25 + a4
        var b4 = b4 < 0? Math.abs(b4) + 25 : 25 - b4
        document.getElementById('bullet4').style.display = 'block';
        document.getElementById('bullet4').style.top = height/50 * b4 + 47 + 'px'
        document.getElementById('bullet4').style.left = height/50 * a4 - 37 + 'px'
        var averageA = a
        var averageB = b
        averageA = averageA < 0? 25 - Math.abs(averageA) : 25 + averageA
        averageB = averageB < 0? Math.abs(averageB) + 25 : 25 - averageB
        document.getElementById('reddot').style.display = 'block';
        document.getElementById('reddot').style.top = height/50 * averageB + 67 + 'px'
        document.getElementById('reddot').style.left = height/50 * averageA - 2 + 'px'
        console.log(averageA, averageB)
    }
     

</script>
